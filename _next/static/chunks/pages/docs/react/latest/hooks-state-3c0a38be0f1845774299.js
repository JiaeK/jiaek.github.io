(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88257],{17375:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.d(t,{Z:function(){return a}})},37657:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(17375),r=n(96156),o=(n(67294),n(3905));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",c({},t))}},i=s("Intro"),p=s("CodeTab"),u={};function d(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",c(c(c({},u),n),{},{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",c({},{id:"usestate"}),"useState"),(0,o.kt)(i,{mdxType:"Intro"},(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"React.useState")," \u8fd4\u56de\u4e00\u4e2a\u6709\u72b6\u6001\u7684\u503c\uff0c\u548c\u4e00\u4e2a\u66f4\u65b0\u5b83\u7684\u51fd\u6570\u3002")),(0,o.kt)("h2",c({},{id:"\u7528\u6cd5"}),"\u7528\u6cd5"),(0,o.kt)(p,{labels:["ReScript","JS Output"],mdxType:"CodeTab"},(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-res"}),"let (state, setState) = React.useState(_ => initialState)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-js"}),"var match = React.useState(function () {\n      return initialState;\n    });\n\nvar state = match[0];\n\nvar setState = match[1];\n"))),(0,o.kt)("p",null,"\u521d\u6b21\u6e32\u67d3\u65f6\uff0c\u8fd4\u56de\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"state")," \u548c\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u7ed9 ",(0,o.kt)("inlineCode",{parentName:"p"},"React.useState")," \u7684 initialState \u4e00\u6837\u3002"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"setState")," \u51fd\u6570\u4e5f\u53ef\u4ee5\u4f20\u7ed9\u5176\u4ed6\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u7528\u4e8e\u901a\u8fc7\u5b50\u7ec4\u4ef6\u8bbe\u7f6e\u7236\u7ec4\u4ef6\u7684 state\u3002"),(0,o.kt)("h2",c({},{id:"\u793a\u4f8b"}),"\u793a\u4f8b"),(0,o.kt)("h3",c({},{id:"\u4e3a-text-input-\u6dfb\u52a0-state"}),"\u4e3a Text Input \u6dfb\u52a0 State"),(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-res"}),'@react.component\nlet make = () => {\n  let (text, setText) = React.useState(_ => "");\n\n  let onChange = evt => {\n    ReactEvent.Form.preventDefault(evt)\n    let value = ReactEvent.Form.target(evt)["value"]\n    setText(_prev => value);\n  }\n\n  <div>\n    <input onChange value=text />\n  </div>\n};\n')),(0,o.kt)("h3",c({},{id:"\u5c06-setstate-\u4f20\u7ed9\u5b50\u7ec4\u4ef6"}),"\u5c06 ",(0,o.kt)("inlineCode",{parentName:"h3"},"setState")," \u4f20\u7ed9\u5b50\u7ec4\u4ef6"),(0,o.kt)("p",null,"\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c ",(0,o.kt)("inlineCode",{parentName:"p"},"ThemeContainer")," \u7ec4\u4ef6\u7528\u4e8e\u7ba1\u7406 ",(0,o.kt)("inlineCode",{parentName:"p"},"darkmode")," state\uff0c\u5e76\u5c06 ",(0,o.kt)("inlineCode",{parentName:"p"},"setDarkmode")," \u51fd\u6570\u4f20\u7ed9 ",(0,o.kt)("inlineCode",{parentName:"p"},"ControlPanel")," \u7ec4\u4ef6\u6765\u89e6\u53d1 state \u53d8\u66f4\u3002"),(0,o.kt)(p,{labels:["ReScript","JS Output"],mdxType:"CodeTab"},(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-res"}),'// ThemeContainer.res\nmodule ControlPanel = {\n  @react.component\n  let make = (~setDarkmode, ~darkmode) => {\n    let onClick = evt => {\n      ReactEvent.Mouse.preventDefault(evt)\n      setDarkmode(prev => !prev)\n    }\n\n    let toggleText = "Switch to " ++ ((darkmode ? "light" : "dark") ++ " theme")\n\n    <div> <button onClick> {React.string(toggleText)} </button> </div>\n  }\n}\n\n@react.component\nlet make = (~content) => {\n  let (darkmode, setDarkmode) = React.useState(_ => false)\n\n  let className = darkmode ? "theme-dark" : "theme-light"\n\n  <div className>\n    <section>\n      <h1> {React.string("More Infos about ReScript")} </h1> content\n    </section>\n    <ControlPanel darkmode setDarkmode />\n  </div>\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-js"}),'function ControlPanel(Props) {\n  var setDarkmode = Props.setDarkmode;\n  var darkmode = Props.darkmode;\n  var onClick = function (evt) {\n    evt.preventDefault();\n    return Curry._1(setDarkmode, (function (prev) {\n                  return !prev;\n                }));\n  };\n  var toggleText = "Switch to " + ((\n      darkmode ? "light" : "dark"\n    ) + " theme");\n  return React.createElement("div", undefined, React.createElement("button", {\n                  onClick: onClick\n                }, toggleText));\n}\n\nfunction ThemeContainer(Props) {\n  var content = Props.content;\n  var match = React.useState(function () {\n        return false;\n      });\n  var darkmode = match[0];\n  var className = darkmode ? "theme-dark" : "theme-light";\n  return React.createElement("div", {\n              className: className\n            }, React.createElement("section", undefined, React.createElement("h1", undefined, "More Infos about ReScript"), content), React.createElement(Playground$ControlPanel, {\n                  setDarkmode: match[1],\n                  darkmode: darkmode\n                }));\n}\n'))),(0,o.kt)("p",null,"\u5f53 ",(0,o.kt)("inlineCode",{parentName:"p"},"setDarkmode")," \u8fd4\u56de\u4e00\u4e2a\u65b0\u503c\u65f6\uff08\u4f8b\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," \u5207\u6362\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"false"),"\uff09\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"ThemeContainer")," \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"className")," \u5c06\u4f1a\u8fdb\u884c\u91cd\u6e32\u67d3\uff0c\u5d4c\u5957\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"ControlPanel")," \u7ec4\u4ef6\u7684\u5207\u6362\u6587\u672c\u4e5f\u4f1a\u6539\u53d8\u3002"),(0,o.kt)("h2",c({},{id:"uncurried-\u7248\u672c"}),"Uncurried \u7248\u672c"),(0,o.kt)("p",null,"\u4e3a\u4e86\u66f4\u5e72\u51c0\u7684 JS \u8f93\u51fa\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"React.Uncurried.useState"),"\uff1a"),(0,o.kt)(p,{labels:["ReScript","JS Output"],mdxType:"CodeTab"},(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-res"}),"let (state, setState) = React.Uncurried.useState(_ => 0)\n\nsetState(. prev => prev + 1)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",c({parentName:"pre"},{className:"language-js"}),"var match = React.useState(function () {\n      return 0;\n  });\n\nvar setState = match[1];\n\nsetState(function (prev) {\n      return prev + 1 | 0;\n    });\n"))))}d.isMDXComponent=!0,d.frontmatter={title:"useState Hook",description:"\u5173\u4e8e ReScript \u4e2d useState React Hook \u7684\u7ec6\u8282",canonical:"/docs/react/latest/hooks-state",__ghEditHref:"https://github.com/reason-association/rescript-lang.org/blob/master/pages/docs/react/latest/hooks-state.mdx"}},58029:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/react/latest/hooks-state",function(){return n(37657)}])}},function(e){e.O(0,[92888,49774,40179],(function(){return t=58029,e(e.s=t);var t}));var t=e.O();_N_E=t}]);